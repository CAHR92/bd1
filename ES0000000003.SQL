 /****************************************************************************
   Proyecto:            CHATBOT
   Descripción:         BITACORA DE SUCESOS
   Elaboró:              DARIO RESENDIZ
   Fecha Elaboración:  DICIEMBRE 2017
   ****************************************************************************/

CREATE SEQUENCE CHATBOT.SEQIDLOGBITACORA
  START WITH 1
  MAXVALUE 99999999999999999999
  MINVALUE 1
  CYCLE
  CACHE 50
  NOORDER ;


CREATE TABLE CHATBOT.TABITACORAHISTORICOS(
   FIBITACORAHISTORICOSID   NUMBER ( 26 )                                        NOT NULL
   , FDFECHAREGISTRO        DATE                      DEFAULT SYSDATE            NOT NULL   
   , FIMODELOID             NUMBER ( 3 )                                         NOT NULL
   , FCCLASE                VARCHAR2 ( 3000 CHAR )    DEFAULT ''                 NOT NULL
   , FCERROR                VARCHAR2 ( 3000 CHAR )    DEFAULT ''                 NOT NULL
   , FCDATOSEXEPCION        CLOB                      DEFAULT EMPTY_CLOB()       NOT NULL
)
PARTITION BY RANGE( FDFECHAREGISTRO )
(
   PARTITION PTABITACORAHISTORICOS1 VALUES LESS THAN( TO_DATE('2018-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN'))
      TABLESPACE TBS_TABITACORAHIST_OPE_DAT
   ,PARTITION PTABITACORAHISTORICOS2 VALUES LESS THAN( TO_DATE('2018-03-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) 
      TABLESPACE TBS_TABITACORAHIST_OPE_DAT
   ,PARTITION PTABITACORAHISTORICOS3 VALUES LESS THAN( TO_DATE('2018-05-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN'))
      TABLESPACE TBS_TABITACORAHIST_OPE_DAT
   ,PARTITION PTABITACORAHISTORICOS4 VALUES LESS THAN( TO_DATE('2018-07-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN'))
       TABLESPACE TBS_TABITACORAHIST_OPE_DAT
   ,PARTITION PTABITACORAHISTORICOS5 VALUES LESS THAN( TO_DATE('2018-09-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN')) 
      TABLESPACE TBS_TABITACORAHIST_OPE_DAT
   ,PARTITION PTABITACORAHISTORICOS6 VALUES LESS THAN( TO_DATE('2018-11-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN'))
      TABLESPACE TBS_TABITACORAHIST_OPE_DAT 
)
TABLESPACE TBS_TABITACORAHIST_OPE_DAT LOGGING ;

CREATE UNIQUE INDEX CHATBOT.PK_TABITACORAHISTORICOS
   ON CHATBOT.TABITACORAHISTORICOS( FIBITACORAHISTORICOSID, FDFECHAREGISTRO )
   TABLESPACE TBS_TABITACORAHIST_OPE_IDX
   LOGGING
   LOCAL (
      PARTITION PTABITACORALOGUEO1
         TABLESPACE TBS_TABITACORAHIST_OPE_IDX
      ,PARTITION PTABITACORALOGUEO2
         TABLESPACE TBS_TABITACORAHIST_OPE_IDX
      ,PARTITION PTABITACORALOGUEO3
         TABLESPACE TBS_TABITACORAHIST_OPE_IDX
      ,PARTITION PTABITACORALOGUEO4
         TABLESPACE TBS_TABITACORAHIST_OPE_IDX
      ,PARTITION PTABITACORALOGUEO5
         TABLESPACE TBS_TABITACORAHIST_OPE_IDX
      ,PARTITION PTABITACORALOGUEO6
         TABLESPACE TBS_TABITACORAHIST_OPE_IDX
      );
  
ALTER TABLE CHATBOT.TABITACORAHISTORICOS ADD( CONSTRAINT PK_TABITACORAHISTORICOS
PRIMARY KEY( FIBITACORAHISTORICOSID, FDFECHAREGISTRO )
USING INDEX CHATBOT.PK_TABITACORAHISTORICOS ) ;


ALTER TABLE CHATBOT.TAUSUARIOS ADD( FICONFIRMACIONTELEFONO NUMBER( 1 ) DEFAULT 0 );
